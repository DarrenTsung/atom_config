var child_process_1 = require("child_process");
var argv = require('yargs').argv;
var serverPath = argv.serverPath;
var projectPath = argv.projectPath;
var args = ["--stdio", "-s", projectPath, "--hostPID", process.pid];
Object.keys(argv)
    .filter(function (z) { return z !== '_' && z !== '$0' && z !== 'serverPath' && z !== 'projectPath'; })
    .forEach(function (z) { return args.push('--' + z + "=" + argv[z]); });
var childProcess = child_process_1.spawn(serverPath, args);
process.stdin.pipe(childProcess.stdin);
childProcess.stdout.pipe(process.stdout);
childProcess.stderr.pipe(process.stderr);
process.stdin.resume();
process.on('message', function (message) {
    if (message === 'kill')
        process.exit();
});
childProcess.on('exit', function () { return process.exit(); });
childProcess.on('disconnect', function () { return process.exit(); });
childProcess.on('close', function () { return process.exit(); });
